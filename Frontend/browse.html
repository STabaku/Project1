<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Browse Medications - Emergency Pharmacy</title>

<!-- ICONS & BOOTSTRAP -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css">

<style>
:root{
  --blue1:#0a58ca;
  --blue2:#1e90ff;
  --blue3:#4facfe;
  --bg:#eef3f8;
  --card:#ffffff;
  --text:#0b1b2b;
  --muted:#6c7a89;
  --success:#28a745;
  --shadow: 0 10px 30px rgba(0,0,0,0.12);
  --radius: 16px;
}

body { background: var(--bg); font-family: Arial, sans-serif; }
.navbar{ background: linear-gradient(90deg, #f9f9f9, #ffffff); color: #0a58ca; padding: 18px 0; }

.search-box{
  max-width:820px;
  margin:0 auto;
  padding:18px;
  border-radius:18px;
  display:flex;
  gap:12px;
  box-shadow: var(--shadow);
  margin-top: 180px;
}

.search-box input{
  flex:1;
  border:none;
  font-size:16px;
  padding:12px;
  outline:none;
}

.search-box button{
  background:#28a745;
  color:white;
  border:none;
  padding:12px 22px;
  border-radius:12px;
  font-weight:700;
  cursor:pointer;
}

/* MAIN GRID */
.main{
  width:min(1200px, 92%);
  margin:40px auto 60px;
  display:grid;
  grid-template-columns: 260px 1fr;
  gap:30px;
}

/* SIDEBAR */
.sidebar{
  background:white;
  border-radius:16px;
  padding:22px;
  box-shadow: var(--shadow);
  margin-top: 215px;
}

.sidebar h4{
  margin:0 0 25px;
  font-size:20px;
  font-weight:800;
  color: #0a58ca;
}

.cat a{
  display:flex;
  align-items:center;
  gap:12px;
  padding:11px 14px;
  border-radius:12px;
  text-decoration:none;
  color:var(--text);
  margin-bottom:8px;
  font-size:15px;
  transition:0.25s;
}

.cat a i{ font-size:16px; color: var(--blue2); width:20px; text-align:center; }
.cat a.active, .cat a:hover{ background: linear-gradient(135deg, #1e90ff, #4facfe); color:white; }
.cat a.active i, .cat a:hover i{ color:white; }

/* PRODUCTS */
.products h2{ margin-bottom:20px; font-size:28px; font-weight:800; color: var(--blue1); }
.grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap:22px;
}

/* PRODUCT CARD */
.card{
  background:white;
  border-radius:16px;
  box-shadow: var(--shadow);
  padding:18px;
  text-align:center;
  transition:0.25s;
}

.card:hover{ transform: translateY(-5px); }

.card img{
  width:100%;
  height:160px;
  object-fit:contain;
  background:#f8f9fa;
  border-radius:12px;
  padding:10px;
  margin-bottom:12px;
}

.card h3{ font-size:18px; margin:6px 0; }
.card small{ color:var(--muted); }
.price{ font-size:20px; font-weight:800; margin:10px 0; }
.stars{ color:#f5b301; font-size:14px; }
.card button{ background:#28a745; color:white; border:none; padding:10px; width:100%; border-radius:10px; font-weight:700; cursor:pointer; margin-top:10px; }

</style>
</head>

<body>

<!-- ================= NAVBAR ================= -->
<nav class="navbar">
  <div class="nav-container">
    <a class="navbar-brand" href="#"><img src="assets/logo.png" alt="24/7 Emergency Pharmacy"></a>
    <div class="nav-links">
      <a class="nav-link" href="index.html"><i class="fa fa-house"></i> Home</a>
      <a class="nav-link" href="request.html"><i class="fa fa-notes-medical"></i> Request Medicine</a>
      <a class="nav-link" href="pharmacies.html"><i class="fa fa-location-dot"></i> Nearby Pharmacies</a>
       <a class="nav-link" href="profile.html"><i class="fa fa-user"></i>Profile</a>
      <a class="nav-link" href="login.html"><i class="fa fa-user"></i> Login</a>
    </div>
  </div>
</nav>


<!-- MAIN GRID -->
<div class="main">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <h4><i class="fa-solid fa-pills"></i> Categories</h4>
    <div class="cat">
      <a class="active" href="#"><i class="fa-solid fa-layer-group"></i> All Medications</a>
      <a href="#"><i class="fa-solid fa-tablets"></i> Pain Relief</a>
      <a href="#"><i class="fa-solid fa-droplet"></i> Diabetes</a>
      <a href="#"><i class="fa-solid fa-bacteria"></i> Antibiotics</a>
      <a href="#"><i class="fa-solid fa-virus"></i> Cold & Flu</a>
      <a href="#"><i class="fa-solid fa-heart-pulse"></i> Cardiovascular</a>
      <a href="#"><i class="fa-solid fa-lungs"></i> Respiratory</a>
      <a href="#"><i class="fa-solid fa-brain"></i> Neurology</a>
      <a href="#"><i class="fa-solid fa-syringe"></i> Injections</a>
    </div>
  </aside>

  <!-- PRODUCTS -->
  <section class="products">
    <h2 id="pharmacyTitle">Browse Medications</h2>
     
 <!-- SEARCH BAR -->
<div class="search-box" style="margin-bottom:50px; display:flex; gap:10px;">
  <input type="text" id="medSearchInput" placeholder="Search medications (e.g. Paracetamol, Insulin...)">
  <button onclick="filterProducts()">
    <i class="fa-solid fa-magnifying-glass"></i> Search
  </button>
</div>

    <div id="productGrid" class="grid"></div>



  </section>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {

    const grid = document.getElementById("productGrid");
    const title = document.getElementById("pharmacyTitle");
    if (!grid) return;

    // Read pharmacy from URL
    const params = new URLSearchParams(window.location.search);
    const pharmacy = params.get("pharmacy");

    // Map pharmacy keys to display names
    const pharmacyNames = {
      city: "City Pharmacy",
      healthplus: "Health Plus Pharmacy",
      vita: "Pharmacy Vita",
      greencross: "Green Cross Pharmacy",
      medicare: "Medicare Pharmacy",
      family: "Family Pharmacy",
      careplus: "Care Plus Pharmacy",
      rapid: "Rapid Pharmacy"
    };

    if(pharmacy && pharmacyNames[pharmacy]){
      title.textContent = `Medications - ${pharmacyNames[pharmacy]}`;
    }

    const pharmacyData = {
        city: [
            { name: "Paracetamol", info: "500mg Tablets", price: "$4.99", img: "assets/paracetamol.jpg" },
            { name: "Ibuprofen", info: "200mg Capsules", price: "$5.99", img: "assets/ibuprofen.jpg" },
            { name: "Tachipirina", info: "Syrup", price: "$11.99", img: "assets/tachipirina.jpg" }
        ],
        healthplus: [
            { name: "Insulin", info: "Injection", price: "$19.99", img: "assets/insulin.jpg" },
            { name: "Amoxicillin", info: "500mg Capsules", price: "$8.99", img: "assets/amoxicillin.jpg" },
            { name: "Rapidol S", info: "500mg Capsules", price: "$6.99", img: "assets/rapidolS.jpg" }
        ],
        vita: [
            { name: "Paracetamol", info: "500mg Tablets", price: "$5.49", img: "assets/paracetamol.jpg" },
            { name: "Cough Syrup", info: "Cold & Flu", price: "$7.99", img: "assets/tachipirina.jpg" }
        ],
        greencross: [
            { name: "Ibuprofen", info: "400mg Tablets", price: "$6.49", img: "assets/ibuprofen.jpg" },
            { name: "Amoxicillin", info: "250mg Capsules", price: "$7.99", img: "assets/amoxicillin.jpg" }
        ],
        medicare: [
            { name: "Insulin", info: "Injection", price: "$18.99", img: "assets/insulin.jpg" },
            { name: "Vitamin C", info: "1000mg Tablets", price: "$4.50", img: "assets/paracetamol.jpg" }
        ],
        family: [
            { name: "Rapidol S", info: "500mg Capsules", price: "$6.99", img: "assets/rapidolS.jpg" },
            { name: "Tachipirina", info: "Syrup", price: "$12.99", img: "assets/tachipirina.jpg" }
        ],
        careplus: [
            { name: "Amoxicillin", info: "500mg Capsules", price: "$9.49", img: "assets/amoxicillin.jpg" },
            { name: "Paracetamol", info: "500mg Tablets", price: "$4.99", img: "assets/paracetamol.jpg" }
        ],
        rapid: [
            { name: "Ibuprofen", info: "200mg Capsules", price: "$5.99", img: "assets/ibuprofen.jpg" },
            { name: "Insulin", info: "Injection", price: "$20.99", img: "assets/insulin.jpg" }
        ]
    };

    const meds = pharmacyData[pharmacy] || [];

    if(!meds.length){
      grid.innerHTML = "<p style='font-weight:600;color:#a11d2d;'>No medications available for this pharmacy.</p>";
      return;
    }

    // Optional: Search filter
    window.filterProducts = function(){
     const query = document.getElementById("medSearchInput").value.toLowerCase();
      const cards = grid.querySelectorAll(".product");
      cards.forEach(card=>{
        const name = card.querySelector("h3").textContent.toLowerCase();
        card.style.display = name.includes(query) ? "block" : "none";
      });
    }

    // Render medicines
    meds.forEach(med => {
        const card = document.createElement('div');
        card.classList.add('card', 'product');
        card.innerHTML = `
            <img src="${med.img}" alt="${med.name}">
            <h3>${med.name}</h3>
            <small>${med.info}</small>
            <div class="price">${med.price}</div>
            <button class="btn-add-to-cart">Add to Cart</button>
        `;
        grid.appendChild(card);

        // Add click event for "Add to Cart"
        card.querySelector(".btn-add-to-cart").addEventListener("click", () => {
            const userId = localStorage.getItem("userId");
            if(!userId){
                alert("Please log in first!");
                return;
            }

            const order = {
                id: Date.now(),
                medicine: med.name,
                info: med.info,
                price: med.price,
                pharmacy: pharmacyNames[pharmacy] || "Unknown Pharmacy",
                date: new Date().toLocaleString(),
                status: "Request Sent"
            };

            // Get orders for this user
            let allOrders = JSON.parse(localStorage.getItem("orders") || "{}");
            if(!allOrders[userId]) allOrders[userId] = [];

            allOrders[userId].push(order);

            localStorage.setItem("orders", JSON.stringify(allOrders));

            alert(`${med.name} added to cart!`);
            window.location.href = "profile.html";
        });
    });

});
</script>

<script src="script.js"></script>
</body>
</html>
